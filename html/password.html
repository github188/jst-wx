<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, minimum-scale=1, maximum-scale=1, user-scalable=no">
	<title>密码操作</title>
	<script type="text/javascript" src="http://zeptojs.com/zepto.js"></script>
	<link rel="stylesheet" type="text/css" href="../css/password.css">
</head>
<body>
	<header>
		<div class="tipsBox">
			<p class="cardTips"></p>
			<p class="pTips">请设置新的卡密码</p>
		</div>
	</header>
	<section>
		<div class="pwdBox">
			<ul class="listBox">
				<li class="box">
					<i></i>
				</li>
				<li class="box">
					<i></i>
				</li>
				<li class="box">
					<i></i>
				</li>
				<li class="box">
					<i></i>
				</li>
				<li class="box">
					<i></i>
				</li>
				<li class="box">
					<i></i>
				</li>
			</ul>
		</div>
		<div class="pwdTips">
			<i>!</i><span>两次密码输入不一致</span>
		</div>
		<div class="pwdBtn">
			<button class="button">确定</button>
		</div>
		<div class="unknowTips">
			<span>不知道卡密码？</span>
		</div>
	</section>
	<div class="keyBox">	
			<input  class="key" type="button" value="1">
			<input  class="key" type="button" value="2">
			<input  class="key" type="button" value="3">		
			<input  class="key" type="button" value="4">
			<input  class="key" type="button" value="5">
			<input  class="key" type="button" value="6">		
			<input  class="key" type="button" value="7">
			<input  class="key" type="button" value="8">
			<input  class="key" type="button" value="9">	
			<input  class="key" type="button" value=" " disabled="disabled">
			<input  class="key" type="button" value="0">
			<input  class="key" type="button" value="X">
		
	</div>
	<script type="text/javascript">
		Zepto(function($){
			//获取信息
			// var cardInfo = JSON.parse(sessionStorage.getItem("pwdShow"));
			// console.log(cardInfo);
			// //初始化显示
			
			// if(cardInfo.type == 1){
			// 	$(".cardTips").text(cardInfo.cardLast);
			// 	$(".pTips").text(cardInfo.tips);
			// 	$(".pwdBtn").addClass("pwdBtnOn");
			// }else{
			// 	$(".pwdTips").addClass("pwdTipsOn")
			// }


			var keyVal = "";//用于记录前6点击的数字
			var count = 0;//用于记录小黑点显示
			$(".keyBox").on("click",".key",function(){
				if($(this).index() == 11){
					$(".box").eq(keyVal.length-1).find("i").removeClass("keyOn");				
					keyVal = keyVal.substring(0,keyVal.length-1);
					count--;
					if(count < 0){
						count = 0;
					}									
				}else if($(this).index()==9){
					keyVal = keyVal;
				}else{	
					keyVal += $(this).val();
					$(".box").eq(count).find("i").addClass("keyOn");
					if(keyVal.length > 6){
						for(var a=0;a<6;a++){
							$(".box").eq(a).find("i").removeClass("keyOn");
						}
						keyVal = $(this).val();
						//keyVal = keyVal.substring(0,6);
						count = 0;
						$(".box").eq(count).find("i").addClass("keyOn");
						//$(".box").eq(count).find("i").parent().siblings().find("i").removeClass("keyOn");

						
					}else if(keyVal.length==6){
						//keyVal = keyVal.substring(0,6);
						// for(var i=0;i<6;i++){
						// 	$(".box").eq(i).find("i").removeClass("keyOn");
						// }
						//count = 0;
						console.log("sdfsjk")
					}			
					
					count++;
					if(count > 6 ){
						count = 0; 
					}
					
					
				}

				console.log(keyVal)
				console.log(count+"----"+keyVal.length)
			})

			// var keyVal = "";//用于记录前6点击的数字
			// var count = 0;//用于记录小黑点显示
			// $(".keyBox").on("click",".key",function(){
			// 	if($(this).index() == 11){
			// 		$(".box").eq(keyVal.length-1).find("i").removeClass("keyOn");				
			// 		keyVal = keyVal.substring(0,keyVal.length-1);
			// 		count--;
			// 		if(count < 0){
			// 			count = 0;
			// 		}									
			// 	}else if($(this).index()==9){
			// 		keyVal = keyVal;
			// 	}else{	
			// 		keyVal += $(this).val();
			// 		$(".box").eq(count).find("i").addClass("keyOn");
			// 		if(keyVal.length > 6){
			// 			keyVal = $(this).val();
			// 			count = 0;											
						
			// 		}else if(keyVal.length==6){
			// 			for(var i=0;i<6;i++){
			// 				$(".box").eq(i).find("i").removeClass("keyOn");
			// 			}
			// 			count = -1;
			// 			console.log("sdfsjk")
			// 		}			
					
			// 		count++;
			// 		if(count > 6 ){
			// 			count = 0; 
			// 		}
					
					
			// 	}

			// 	console.log(keyVal)
			// 	console.log(count+"----"+keyVal.length)
			// })
		})


	</script>

</body>
</html>